<!DOCTYPE html>
<html>

<head>
  <title>Futterautomat</title>
  <link rel="stylesheet" type="text/css" href="/style.css">
  <link rel="stylesheet" type="text/css" href="/styleMobile.css">
  <link rel="stylesheet" type="text/css" href="/styleAddon.css">
  <style>
    :root {
      --ColorHome: var(--contrast);
      --ColorConfig: var(--secondary);
      --ColorWiFi: var(--secondary);
      --ColorSystem: var(--secondary)
    }
  </style>
  <script src="/view.js"></script>
  <script type="text/javascript">
    function handleWsMsg(msg) {
      let DataObject = JSON.parse(msg.data);
      updateView(DataObject.elements, "data", false);
    }
    function onChange(ValueInput) {

      let Value = ValueInput.value;
      let ViewTag = ValueInput.parentElement.parentElement;
      let ViewElement = ViewTag.parentElement;
      let OutData = { "elements": [{ "name": ViewElement.getAttribute("name"), "data": [{ "name": ViewTag.getAttribute("name"), "value": Value }] }] };
      ws.send(JSON.stringify(OutData));
    }
    function onClick(ValueInput) {
      let stat = ValueInput.getAttribute("stat");
      let Value;
      if (stat == "on") {
        Value = false;
      } else if (stat == "off") {
        Value = true;
      } else {
        return;
      }
      let ViewTag = ValueInput.parentElement.parentElement;
      let ViewElement = ViewTag.parentElement;
      let OutData = { "elements": [{ "name": ViewElement.getAttribute("name"), "data": [{ "name": ViewTag.getAttribute("name"), "value": Value }] }] };
      ws.send(JSON.stringify(OutData));
    }

    var ws = new WebSocket("ws://" + location.host + "/ws");
    ws.onmessage = function (_msg) {
      handleWsMsg(_msg);
    };
  </script>
</head>

<body>
  <nav class="container-fluid">
    <ul>
      <li>%SVG_LOGO%</li>
      <li>Online Daten</li>
    </ul>
    <ul>
      <li><a href="/home.htm">%SVG_HOME%</a></li>
      <li><a href="/config.htm">%SVG_CONFIG%</a></li>
      <li><a href="/connect">%SVG_WIFI%</a></li>
      <li><a href="/sys">%SVG_SYSTEM%</a></li>
    </ul>
  </nav>
  <main class="container">
    <section id="elements">

    </section>
  </main>
</body>

</html>